## 说说对事件循环的理解
JS是一个单线程的脚本语言，同一时间只能做一件事。事件循环可以实现单线程非阻塞,确保JS程序能够处理大量的异步任务并保持程序的响应性

JS任务：
- 同步任务：立刻执行的任务，一般会直接进入主线程执行
- 异步任务：异步执行的任务，比如接口请求，定时器等，会进入任务队列。

*主线程 执行栈 任务队列  宏任务 微任务*

**定义**:主线程里的同步任务执行完毕后，事件循环会检查是否有待执行的微任务。如果有，先执行所有的微任务，然后再去任务队列中读取宏任务。将宏任务推入主线程执行，并重复这一过程。这就是事件循环，直到所有任务都执行完毕或没有新的任务为止

### 宏任务和微任务
异步任务分为宏任务和微任务，微任务在宏任务之前执行

**微任务**
- Promise.then
- MutationObserver
- Object.observe Proxy
- process.nextTick(Node.js)

await是返回一个Promise对象，所以await下面的代码会加入微任务队列

**宏任务**

时间粒度较大，执行时间间隔不能精确控制，高实时性需求不太符合
- script 外层同步代码
- setTimeout/setInterval
- UI rendering
- postMessage MessageChannel
- setImmediate I/O (Node.js)

### 顺序
- 执行一个宏任务，如果遇到微任务会将其放到微任务的事件队列里
- 当前宏任务执行完，查看微任务的事件队列，里面所有微任务执行完然后执行下一个宏任务