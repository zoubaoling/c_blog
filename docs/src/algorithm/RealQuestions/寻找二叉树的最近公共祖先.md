# 寻找二叉树的最近公共祖先
**关键字：二叉树、递归**
```
题目描述： 给定一个二叉树, 找到该树中两个指定节点的最近公共祖先(节点本身也可以是其祖先节点)
```
```
示例 1:
输入: root = [3,5,1,6,2,0,8,null,null,7,4], p = 5, q = 1
输出: 3
解释: 节点 5 和节点 1 的最近公共祖先是节点 3。
```
```
示例 2:
输入: root = [3,5,1,6,2,0,8,null,null,7,4], p = 5, q = 4
输出: 5
解释: 节点 5 和节点 4 的最近公共祖先是节点 5。因为根据定义最近公共祖先节点可以为节点本身
```
> 上面的输入都为层序遍历数组，从上到下，从左到右

## 思路分析
查找节点的祖先节点，最好就是`自下而上`查找，也就是`回溯`

二叉树的`后序遍历-左右中`就是`自下而上`的遍历节点

后序遍历模版
```js
const left = dfs(root.left) // 处理左节点
const right = dfs(root.right) // 处理右节点
// 根据 左节点递归结果 和 右节点递归结果 处理中节点
handle(left, right)
```

### 祖先节点的几种情况、
目标节点：`p 和 q`
1. `root.left=p root.right=q`
2. `root.left=p q在root右子树里面`
3. `root.right=p q在root左子树里面`
4. `root=p q在root的左子树或者右子树里面`

递归函数是用来`自下而上`的查找目标节点的最近公共祖先节点、最近祖先节点
1. 如果当前节及其子树里找不到目标节点，返回null给父节点
2. 如果当前节点左子树或者右子树里找到了目标节点，返回目标节点给父节点
   - 左子树或者右子树里有一个目标节点
     - 左子树或者右子树里有两个目标节点(两个目标节为祖孙关系)
3. 如果当前节点的左右子树都能找到目标节点，那么当前节点就是最近的公共祖先元素并返回给父节点

`自下而上`的将目标节点或目标节点的最近公共祖先节点传递给根节点

查找目标节点 -> ... -> 左右子树结果符合公共节点就返回标记为最近的公共节点 -> ... -> 公共节点返回给根节点

::: details 展开查看代码
<<< @/algorithm/RealQuestions/ts/LowestCommonAncestor.ts
:::
